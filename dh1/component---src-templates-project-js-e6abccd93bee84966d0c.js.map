{"version":3,"sources":["webpack:///./src/templates/project.js"],"names":["Project","props","replaceAll","searchString","replaceString","str","console","log","split","join","fancyHtml","data","wp","portfolio","content","fancyHtml1","fancyHtml2","finalHtml","loadingImgUrl","portfolioTitle","title","featuredImage","node","sourceUrl","houzzButtonHtml","slug","excerpt","substring","indexOf","terms","edges","name","toString","includes","isProject","featuredImg","pageLink","window","location","style","float","marginTop","to","color","fontWeight","textDecoration","className","src","dangerouslySetInnerHTML","__html","onClick","e","currentTarget","querySelector","setAttribute","classList","remove","add","onLoad","borderRadius","alt"],"mappings":"mHAAA,0FAiFeA,UAvEC,SAAAC,GAKd,SAASC,EAAWC,EAAcC,EAAeC,GAG/C,OAFAC,QAAQC,IAAI,CAACF,QAENA,EAAIG,MAAML,GAAcM,KAAKL,GAPxCE,QAAQC,IAAI,CAACN,UAUX,IAAMS,EAAYR,EAAW,gBAAD,2XARfD,EAAMU,KAAKC,GAAGC,UAAUC,QAAUb,EAAMU,KAAKC,GAAGC,UAAUC,QAAU,cAgB3EC,EAAab,EAAW,oCAAqC,IAAKQ,GAIlEM,EAAad,EAAW,8BAAD,yBAA0Da,GAIjFE,EAAS,GAAMf,EAAW,WAAY,8BAA+Bc,GACrEE,EAAgB,2DAahBC,EAAiBlB,EAAMU,KAAKC,GAAGC,UAAUO,MACzCC,EAAgBpB,EAAMU,KAAKC,GAAGC,UAAUQ,cAAcC,KAAKC,UAE3DC,EAAe,wFACiCvB,EAAMU,KAAKC,GAAGC,UAAUY,KADzD,wCAGPN,EAHO,kBAITjB,EAAW,6BAA8B,wBAAyBmB,GAJzD,mBAKRpB,EAAMU,KAAKC,GAAGC,UAAUa,QAAQC,UAAU,EAAG1B,EAAMU,KAAKC,GAAGC,UAAUa,QAAQE,QAAQ,SAL7E,uBAMJ3B,EAAMU,KAAKC,GAAGC,UAAUgB,MAAMC,MAAM,GAAGR,KAAKS,KAAKC,WAN7C,qEAWrB,OAFA1B,QAAQC,IAAI,eAAgBiB,GAG1B,kBAAC,IAAD,CAAQJ,MAAOD,GACb,kBAAC,IAAD,CAAMC,MAAUnB,EAAMU,KAAKC,GAAGC,UAAUO,MAA7B,KAAsCnB,EAAMU,KAAKC,GAAGC,UAAUO,MAAMa,SAAS,WAAa,GAAK,WAAaC,WAAW,EAAMC,YAAalC,EAAMU,KAAKC,GAAGC,UAAUQ,cAAcE,YAC3L,kBAAC,IAAD,CAAea,SAA6B,oBAAXC,OAA0BA,OAAOC,SAAW,IAAKjB,cAAeA,IACjG,0BAAMkB,MAAO,CAAEC,MAAO,OAAQC,UAAW,UACvC,kBAAC,IAAD,CAAMC,GAAG,WAAU,0BAAMH,MAAO,CAAEI,MAAO,OAAQC,WAAY,MAAOC,eAAgB,SAAjE,gBAA0G,6BAAM,6BACrI,yBAAKC,UAAU,iBAAiBC,IAAK1B,IACrC,yBAAK2B,wBAAyB,CAAEC,OAAQhC,KACxC,0BAAM6B,UAAU,iBAAhB,kBAAqD,6BACrD,yBAAKE,wBAAyB,CAAEC,OAAQ/C,EAAW,6BAA8B,wBAAyBsB,MAC1G,yBAAK0B,QAnCmB,SAAAC,GAC1BA,EAAEC,cAAcC,cAAc,OAAOC,aAAa,MAAOpC,GACzDiC,EAAEC,cAAcG,UAAUC,OAAO,UACjCL,EAAEC,cAAcG,UAAUE,IAAI,aAiC1BC,OA9BgB,SAAAP,GACpBA,EAAEC,cAAcC,cAAc,OAAOd,MAAMoB,aAAe,MA6B/Bb,UAAU,gBAAe,yBAAKC,IAAK7B,EAAe0C,IAAI","file":"component---src-templates-project-js-e6abccd93bee84966d0c.js","sourcesContent":["import React from 'react';\nimport { graphql, Link } from 'gatsby';\nimport SocialSharing from '../components/socialSharing';\n\nimport Layout from '../components/layout';\nimport Head from '../components/head';\nimport '../styles/projectStyles.css';\n\n\n\nconst Project = props => {\nconsole.log({props})\n\n  const html = props.data.wp.portfolio.content ? props.data.wp.portfolio.content : 'no content'\n\n  function replaceAll(searchString, replaceString, str) {\n    console.log({str});\n    \n    return str.split(searchString).join(replaceString);\n  }\n\n  const fancyHtml = replaceAll('itemprop=\"url', `onclick=\"(e => { e.preventDefault(); \n  var largeImgUrl = e.currentTarget.querySelector('img').dataset.largeFile;  \n  var lightboxBox = document.querySelector('.lightbox-box'); \n  lightboxBox.classList.remove('inactive');\n  lightboxBox.classList.add('active');\n  lightboxBox.querySelector('img').setAttribute('src', largeImgUrl);\n  \n  })(window.event)\" itemprop=\"url`, html);\n  const fancyHtml1 = replaceAll('http://www.atlantavoices.com/dh2/', '/', fancyHtml);\n\n  // const fancyHtml1a = replaceAll('src=\"https://i1.wp.com', 'src=\"https://i2.wp.com', fancyHtml1);\n\n  const fancyHtml2 = replaceAll('darkhorsewoodworks.com/dh1/', `atlantavoices.com/dh2/`, fancyHtml1);\n\n  // const fancyHtml3 = replaceAll(' width=\"', `')}`, fancyHtml2);\n\n  const finalHtml = `${replaceAll('<iframe ', '<iframe data-display=\"none\"', fancyHtml2)}`;\n  const loadingImgUrl = 'https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/200.gif';\n\n  const handleLightboxClick = e => {\n    e.currentTarget.querySelector('img').setAttribute('src', loadingImgUrl);\n    e.currentTarget.classList.remove('active');\n    e.currentTarget.classList.add('inactive');\n  }\n\n  const handleImgLoad = e => {\n    e.currentTarget.querySelector('img').style.borderRadius = '0%';\n  }\n\n\n  const portfolioTitle = props.data.wp.portfolio.title;\n  const featuredImage = props.data.wp.portfolio.featuredImage.node.sourceUrl;\n\n  const houzzButtonHtml = `<a class=\"houzz-share-button\"\n  data-url=\"http://darkhorsewoodworks.com/dh1/project/${props.data.wp.portfolio.slug}\"\n  data-hzid=\"2881\"\n  data-title=\"${portfolioTitle}\"\n  data-img=\"${replaceAll('darkhorsewoodworks.com/dh1', 'atlantavoices.com/dh2', featuredImage)}\"\n  data-desc=\"${props.data.wp.portfolio.excerpt.substring(0, props.data.wp.portfolio.excerpt.indexOf('</p>'))}\"\n  data-category=\"${props.data.wp.portfolio.terms.edges[0].node.name.toString()}\"\n  data-showcount=\"1 \"\n  href=\"https://www.houzz.com\">Houzz</a>`\n  console.log('HouzzButton:', houzzButtonHtml);\n\n  return (\n    <Layout title={portfolioTitle}>\n      <Head title={`${props.data.wp.portfolio.title} ${props.data.wp.portfolio.title.includes('Project') ? '' : 'Project'}`} isProject={true} featuredImg={props.data.wp.portfolio.featuredImage.sourceUrl} />\n      <SocialSharing pageLink={(typeof window !== 'undefined') ? window.location : '#'} featuredImage={featuredImage} />\n      <span style={{ float: 'left', marginTop: '-1rem' }}>\n        <Link to=\"gallery\"><span style={{ color: '#666', fontWeight: '100', textDecoration: 'none' }}>...Gallery</span></Link></span><br /><br />\n      <img className=\"featured-image\" src={featuredImage} />\n      <div dangerouslySetInnerHTML={{ __html: finalHtml }} />\n      <span className=\"save-to-houzz\">Save to Houzz:</span><br />\n      <div dangerouslySetInnerHTML={{ __html: replaceAll('darkhorsewoodworks.com/dh1', 'atlantavoices.com/dh2', houzzButtonHtml) }} />\n      <div onClick={handleLightboxClick}\n        onLoad={handleImgLoad} className=\"lightbox-box\"><img src={loadingImgUrl} alt=\"LOADING\" /></div>\n    </Layout>\n  )\n}\n\nexport default Project;\n\n\nexport const query = graphql`\n  query($id: ID!) {\n    wp {\n      portfolio(id: $id) {\n      terms {\n        edges {\n          node {\n            termTaxonomyId\n            name\n          }\n        }\n      }\n      slug\n      excerpt\n      content(format: RENDERED)\n      featuredImage {\n        node {\n          sourceUrl(size: M)\n        }\n      }\n      title\n      }\n    }\n  }\n`"],"sourceRoot":""}